<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="utf-8" />
  <title>CAMPEONATO 3BD - Classifica√ß√£o</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="../css/style.css">
  <style>
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 20px;
      margin: 20px 0;
    }
    
    .stat-card {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    }
    
    .stat-card h3 {
      margin: 0 0 10px 0;
      font-size: 0.9rem;
      opacity: 0.9;
    }
    
    .stat-card .value {
      font-size: 2.5rem;
      font-weight: bold;
      margin: 10px 0;
    }
    
    .stat-card.orange {
      background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
    }
    
    .stat-card.green {
      background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
    }
    
    .stat-card.purple {
      background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
    }
    
    .classificacao-table td:first-child {
      font-weight: bold;
      color: #2563eb;
    }
    
    .classificacao-table tr:nth-child(1) td:first-child::before {
      content: 'ü•á ';
    }
    
    .classificacao-table tr:nth-child(2) td:first-child::before {
      content: 'ü•à ';
    }
    
    .classificacao-table tr:nth-child(3) td:first-child::before {
      content: 'ü•â ';
    }
    
    .artilheiros-list {
      background: #f8f9fa;
      border-radius: 10px;
      padding: 15px;
      margin: 20px 0;
    }
    
    .artilheiro-item {
      display: flex;
      justify-content: space-between;
      padding: 10px;
      border-bottom: 1px solid #e0e0e0;
    }
    
    .artilheiro-item:last-child {
      border-bottom: none;
    }
    
    .artilheiro-gols {
      font-weight: bold;
      color: #ef4444;
      font-size: 1.2rem;
    }
    
    .loading {
      text-align: center;
      padding: 40px;
      color: #666;
    }
    
    .tab-buttons {
      display: flex;
      gap: 10px;
      margin: 20px 0;
      flex-wrap: wrap;
    }
    
    .tab-btn {
      padding: 10px 20px;
      border: none;
      background: #f0f0f0;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 600;
      transition: all 0.3s;
    }
    
    .tab-btn.active {
      background: #2563eb;
      color: white;
    }
    
    .tab-content {
      display: none;
    }
    
    .tab-content.active {
      display: block;
    }
  </style>
</head>
<body>
  <h1>CAMPEONATO 3BD</h1>

  <nav>
    <a href="../index.html">Jogadores</a>
    <a href="capitao.html">Capit√£o</a>
    <a href="treinador.html">Treinador</a>
    <a href="equipa.html">Equipa</a>
    <a href="arbitro.html">√Årbitro</a>
    <a href="jogo.html">Jogo</a>
    <a href="resumo.html" style="font-weight: bold;">Classifica√ß√£o</a>
  </nav>

  <main>
    <h1>üìä Dashboard do Campeonato</h1>
    
    <div class="stats-grid" id="statsGrid">
      <div class="stat-card">
        <h3>Total de Equipas</h3>
        <div class="value" id="totalEquipas">-</div>
      </div>
      <div class="stat-card orange">
        <h3>Jogos Realizados</h3>
        <div class="value" id="totalJogos">-</div>
      </div>
      <div class="stat-card green">
        <h3>Total de Golos</h3>
        <div class="value" id="totalGolos">-</div>
      </div>
      <div class="stat-card purple">
        <h3>Jogadores Registados</h3>
        <div class="value" id="totalJogadores">-</div>
      </div>
    </div>

    <div class="tab-buttons">
      <button class="tab-btn active" onclick="showTab('classificacao')">üèÜ Classifica√ß√£o</button>
      <button class="tab-btn" onclick="showTab('artilheiros')">‚öΩ Artilheiros</button>
      <button class="tab-btn" onclick="showTab('proximos')">üìÖ Pr√≥ximos Jogos</button>
    </div>

    <div id="classificacao" class="tab-content active">
      <h2>üèÜ Classifica√ß√£o Geral</h2>
      <div class="table-wrap">
        <table class="classificacao-table">
          <thead>
            <tr>
              <th>Pos</th>
              <th>Equipa</th>
              <th>J</th>
              <th>V</th>
              <th>E</th>
              <th>D</th>
              <th>GM</th>
              <th>GS</th>
              <th>SG</th>
              <th>Pts</th>
            </tr>
          </thead>
          <tbody id="classificacaoBody">
            <tr><td colspan="10" class="loading">Carregando classifica√ß√£o...</td></tr>
          </tbody>
        </table>
      </div>
    </div>

    <div id="artilheiros" class="tab-content">
      <h2>‚öΩ Artilheiros do Campeonato</h2>
      <div class="artilheiros-list" id="artilheirosList">
        <div class="loading">Carregando artilheiros...</div>
      </div>
    </div>

    <div id="proximos" class="tab-content">
      <h2>üìÖ Pr√≥ximos Jogos</h2>
      <div class="table-wrap">
        <table>
          <thead>
            <tr>
              <th>Data</th>
              <th>Casa</th>
              <th>Fora</th>
              <th>Est√°dio</th>
              <th>√Årbitro</th>
            </tr>
          </thead>
          <tbody id="proximosBody">
            <tr><td colspan="5" class="loading">Carregando pr√≥ximos jogos...</td></tr>
          </tbody>
        </table>
      </div>
    </div>

    <div class="footer">
      <strong>Sistema de Gest√£o de Campeonatos</strong> - Desenvolvido por Turma 3BD<br>
      Direitos Reservados ¬© 2024
    </div>
  </main>

  <script>
    function showTab(tabName) {
      document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
      document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
      
      document.getElementById(tabName).classList.add('active');
      event.target.classList.add('active');
    }

    async function loadStats() {
      try {
        // Carregar estat√≠sticas gerais
        const [equipas, jogos, jogadores] = await Promise.all([
          fetch('../api/rows.php?table=equipa').then(r => r.json()),
          fetch('../api/rows.php?table=jogo').then(r => r.json()),
          fetch('../api/rows.php?table=jogador').then(r => r.json())
        ]);

        document.getElementById('totalEquipas').textContent = equipas.count || 0;
        document.getElementById('totalJogos').textContent = jogos.count || 0;
        document.getElementById('totalJogadores').textContent = jogadores.count || 0;
        
        // Calcular total de golos
        let totalGolos = 0;
        if (jogos.data && Array.isArray(jogos.data)) {
          // As colunas s√£o: equipa_casa_id, equipa_fora_id, data_hora
          // Precisamos buscar os golos de outra forma ou fazer query SQL espec√≠fica
          totalGolos = '?'; // Por enquanto
        }
        document.getElementById('totalGolos').textContent = totalGolos;

      } catch (e) {
        console.error('Erro ao carregar estat√≠sticas:', e);
      }
    }

    async function loadClassificacao() {
      try {
        // Simular classifica√ß√£o (idealmente viria de uma view SQL)
        const tbody = document.getElementById('classificacaoBody');
        tbody.innerHTML = `
          <tr>
            <td>1</td><td>Maxaquene FC</td><td>2</td><td>2</td><td>0</td><td>0</td><td>5</td><td>1</td><td>+4</td><td><strong>6</strong></td>
          </tr>
          <tr>
            <td>2</td><td>Costa do Sol</td><td>2</td><td>1</td><td>1</td><td>0</td><td>3</td><td>2</td><td>+1</td><td><strong>4</strong></td>
          </tr>
          <tr>
            <td>3</td><td>Black Bulls</td><td>2</td><td>2</td><td>0</td><td>0</td><td>3</td><td>0</td><td>+3</td><td><strong>6</strong></td>
          </tr>
          <tr>
            <td>4</td><td>Incom√°ti FC</td><td>2</td><td>1</td><td>0</td><td>1</td><td>3</td><td>1</td><td>+2</td><td><strong>3</strong></td>
          </tr>
          <tr>
            <td>5</td><td>UD Songo</td><td>2</td><td>0</td><td>2</td><td>0</td><td>3</td><td>3</td><td>0</td><td><strong>2</strong></td>
          </tr>
          <tr>
            <td>6</td><td>Ferrovi√°rio Nampula</td><td>2</td><td>0</td><td>1</td><td>1</td><td>2</td><td>4</td><td>-2</td><td><strong>1</strong></td>
          </tr>
          <tr>
            <td>7</td><td>Ferrovi√°rio Maputo</td><td>2</td><td>0</td><td>0</td><td>2</td><td>2</td><td>4</td><td>-2</td><td><strong>0</strong></td>
          </tr>
          <tr>
            <td>8</td><td>ENH Vilankulo</td><td>2</td><td>0</td><td>0</td><td>2</td><td>0</td><td>6</td><td>-6</td><td><strong>0</strong></td>
          </tr>
        `;
      } catch (e) {
        console.error('Erro ao carregar classifica√ß√£o:', e);
      }
    }

    async function loadArtilheiros() {
      const container = document.getElementById('artilheirosList');
      container.innerHTML = `
        <div class="artilheiro-item">
          <div>
            <strong>Stanley Ratifo</strong><br>
            <small>Maxaquene FC</small>
          </div>
          <div class="artilheiro-gols">‚öΩ 4</div>
        </div>
        <div class="artilheiro-item">
          <div>
            <strong>Rodrigo</strong><br>
            <small>Incom√°ti FC</small>
          </div>
          <div class="artilheiro-gols">‚öΩ 3</div>
        </div>
        <div class="artilheiro-item">
          <div>
            <strong>Gabriel</strong><br>
            <small>Black Bulls</small>
          </div>
          <div class="artilheiro-gols">‚öΩ 3</div>
        </div>
        <div class="artilheiro-item">
          <div>
            <strong>Shaquille</strong><br>
            <small>Costa do Sol</small>
          </div>
          <div class="artilheiro-gols">‚öΩ 1</div>
        </div>
      `;
    }

    async function loadProximosJogos() {
      const tbody = document.getElementById('proximosBody');
      tbody.innerHTML = `
        <tr>
          <td>04/12/2024 15:00</td>
          <td>Maxaquene FC</td>
          <td>Costa do Sol</td>
          <td>Est√°dio do Maxaquene</td>
          <td>Jo√£o Silva</td>
        </tr>
        <tr>
          <td>04/12/2024 17:00</td>
          <td>UD Songo</td>
          <td>Black Bulls</td>
          <td>Est√°dio de Songo</td>
          <td>Carlos Mendes</td>
        </tr>
        <tr>
          <td>05/12/2024 15:00</td>
          <td>Ferrovi√°rio Nampula</td>
          <td>Incom√°ti FC</td>
          <td>Est√°dio de Nampula</td>
          <td>Ant√≥nio Costa</td>
        </tr>
      `;
    }

    // Carregar dados ao iniciar
    loadStats();
    loadClassificacao();
    loadArtilheiros();
    loadProximosJogos();
  </script>
</body>
</html>